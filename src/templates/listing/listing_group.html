{% extends "listing/listing_base.html" %}

{% block title %}Gruppenliste | Self-Service{% endblock %}

{% block content %}

<a href="{{ url_for('search_blueprint.shopping_cart') }}" class="cart">
  🛒 {{ amount_groups }} groups
</a>

<h1>Search Groups</h1>
<form method="get" action="{{ url_for('search_blueprint.search_groups') }}">
  <input type="text" name="searchinput" value="{{ searchinput }}" placeholder="Enter group name or description" />
  <button type="submit">Search</button>
</form>

{% for group in groups %}
  <div class="group">
    <strong>{{ group.groupname }}</strong>: {{ group.description }}
    <form method="post" style="display:inline">
      <input type="hidden" name="gid" value="{{ group.gid }}">
      <input type="hidden" name="add_group" value="{{ group.groupname }}">
      <input type="hidden" name="description" value="{{ group.description }}">
      <button type="submit" class="add-btn" {% if group.groupname in cart_names %}disabled{% endif %}>+</button>
    </form>
    <!-- Gruppe löschen -->
    <form method="post" 
    action="{{ url_for('group_blueprint.delete_group') }}" 
    class="confirm-form"
    data-title="Delete this group?"
    data-text="Do you really want to delete group '{{ group.groupname }}'?" 
    style="display:inline">
      <input type="hidden" name="group_name" value="{{ group.groupname }}">
      <button type="submit" class="danger">🗑️ Löschen</button>
    </form>
  </div>
{% endfor %}

{% endblock %}