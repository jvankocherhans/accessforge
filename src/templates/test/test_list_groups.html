<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Group Search</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='stylesheets/global.css') }}">
</head>
<body>
  {% include "includes/_flashmsg.html" %}
  {% from "includes/_formhelpers.html" import render_field %}
  {% from "includes/_confirm_modal.html" import confirm_modal %}

  {{ confirm_modal() }}

  <a href="{{ url_for('search_blueprint.shopping_cart') }}" class="cart">
    🛒 {{ amount_groups }} groups
  </a>

  <h1>Search Groups</h1>
  <form method="get" action="{{ url_for('search_blueprint.search_groups') }}">
    <input type="text" name="searchinput" value="{{ searchinput }}" placeholder="Enter group name or description" />
    <button type="submit">Search</button>
  </form>

  {% for group in groups %}
    <div class="group">
      <strong>{{ group.groupname }}</strong>: {{ group.description }}
      <form method="post" style="display:inline">
        <input type="hidden" name="gid" value="{{ group.gid }}">
        <input type="hidden" name="add_group" value="{{ group.groupname }}">
        <input type="hidden" name="description" value="{{ group.description }}">
        <button type="submit" class="add-btn" {% if group.groupname in cart_names %}disabled{% endif %}>+</button>
      </form>
      <!-- Gruppe löschen -->
      <form method="post" 
      action="{{ url_for('group_blueprint.delete_group') }}" 
      class="confirm-form"
      data-title="Delete this group?"
      data-text="Do you really want to delete group '{{ group.groupname }}'?" 
      style="display:inline">
        <input type="hidden" name="group_name" value="{{ group.groupname }}">
        <button type="submit" class="danger">🗑️ Löschen</button>
      </form>
    </div>
  {% endfor %}

  <script src="{{ url_for('static', filename='scripts/confirm-modal.js') }}"></script>
</body>
</html>
